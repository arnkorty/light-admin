webpackJsonp([2],{156:function(t,e,n){var i=n(60)(n(187),n(216),null,null,null);t.exports=i.exports},163:function(t,e,n){"use strict";function i(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["edit","delete"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 0===e.length?[]:[s()({},n,{title:"操作",key:"action",align:"center",className:"operator-actions",render:function(n,i){return n("div",e.map(function(e){return o.call(t,n,i)[e]}))}})]}function o(t,e){var n=this;return{edit:t("Button",{props:{type:"primary",size:"small"},on:{click:function(){n.onAction&&n.onAction("edit",e)}}},"编辑"),delete:t("Button",{props:{type:"error",size:"small"},on:{click:function(){n.$Modal.confirm({content:"确认删除",onOk:function(){n.onAction&&n.onAction("delete",e)}})}}},"删除")}}e.a=i;var a=n(6),s=n.n(a)},164:function(t,e,n){var i=n(60)(n(166),n(172),null,null,null);t.exports=i.exports},165:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(164),o=n.n(i);e.default={name:"ModalForm",components:{SimpleForm:o.a},props:{value:{type:Boolean,default:!1},inputs:{type:Array,default:function(){return{}}},initData:{type:Object,default:function(){return{}}},title:{type:String}},data:function(){return{visible:this.value}},methods:{onCancel:function(t){this.$emit("on-cancel",t),this.visible=!1},onSubmit:function(t){this.$emit("on-submit",t)}},watch:{value:function(t){this.visible=t}}}},166:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=n.n(i),a=n(6),s=n.n(a),r=n(61),l=n(4);e.default={name:"SimpleForm",props:{showAction:{type:Boolean,default:!0},inputs:{type:Array,default:function(){return[]}},initData:{type:Object,default:function(){return{}}},isModal:{type:Boolean,default:!1},modalOpen:{type:Boolean,default:!1},rules:{type:Object,default:function(){return{}}},labelCol:{type:Object,default:function(){return{}}},inputCol:{type:Object,default:function(){return{}}},submitButtonText:{type:String,default:"提交"},submitErrorText:{type:String,default:""},title:{type:String,default:""}},data:function(){var t=this,e={},n={},i={};return this.inputs.forEach(function(o){e[o.key]=i[o.key]=t.initData[o.key],n[o.key]=null}),{obj:e,errors:n,oldObj:i,changed:!1,canceled:!1,initing:!1}},computed:s()({},n.i(r.a)("common",["loading"]),{isLoading:function(){return this.loading&&n.i(l.b)(this)},getRules:function(){return s()({},this.inputs.reduce(function(t,e){return t[e.key]=e.rules,t},{}),this.rules)},getSubmitButtonText:function(){return this.changed||0===this.submitErrorText.length?this.submitButtonText:this.submitErrorText},valid:function(){return n.i(l.c)(this.obj,this.getRules)}}),methods:{handleSubmit:function(t){n.i(l.c)(this.obj,this.getRules,this.errors)&&(this.changed=!1,n.i(l.d)(this),this.$emit("on-submit",o()({},this.obj)))},handleCancel:function(){this.$emit("on-cancel",this.obj)}},watch:{obj:{handler:function(t){if(this.changed=!0,!this.canceled&&!this.initing){for(var e in t)if(t[e]!==this.oldObj[e]){var i=n.i(l.e)(t[e],this.getRules[e]);this.errors[e]="OK"===i?null:i}this.oldObj=s()({},t)}},deep:!0},modalOpen:function(t){if(t)this.canceled=!1;else{this.canceled=!0;for(var e in this.obj)this.errors[e]=null,this.obj[e]=this.initData[e]}},initData:function(t){var e=this;this.initing=!0;for(var n in this.obj)this.obj[n]=t[n],this.errors[n]=null;setTimeout(function(){return e.initing=!1},200)}}}},167:function(t,e,n){e=t.exports=n(151)(!0),e.push([t.i,".modal-form .ivu-modal-body .ivu-modal-footer{margin:16px -16px -16px}.modal-form .ivu-modal-content>.ivu-modal-footer{display:none}","",{version:3,sources:["/Users/arnkorty/Documents/code/light-admin/src/components/modal_form.vue"],names:[],mappings:"AACA,8CACE,uBAAmB,CAIpB,AACD,iDACE,YAAc,CACf",file:"modal_form.vue",sourcesContent:["\n.modal-form .ivu-modal-body .ivu-modal-footer {\n  margin-left: -16px;\n  margin-right: -16px;\n  margin-bottom: -16px;\n  margin-top: 16px;\n}\n.modal-form .ivu-modal-content > .ivu-modal-footer {\n  display: none;\n}\n"],sourceRoot:""}])},168:function(t,e,n){var i=n(167);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(152)("a3996ae6",i,!0)},170:function(t,e,n){function i(t){n(168)}var o=n(60)(n(165),n(171),i,null,null);t.exports=o.exports},171:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:t.title,"class-name":"modal-form"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("SimpleForm",{attrs:{inputs:t.inputs,isModal:!0,"init-data":t.initData,modalOpen:t.visible},on:{"on-submit":t.onSubmit,"on-cancel":t.onCancel}})],1)},staticRenderFns:[]}},172:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"simple-form"},[t.title&&t.title.length>0?n("Row",{staticClass:"form-title"},[n("h3",[t._v(t._s(t.title))])]):t._e(),t._v(" "),n("Form",[t._l(t.inputs,function(e){return n("Row",{key:e.key,staticClass:"form-control"},[n("Col",{attrs:{sm:t.labelCol.sm||4,xs:t.labelCol.xs||24}},[n("Label",{staticClass:"form-label"},[t._v("\n        "+t._s(e.label)+"\n      ")])],1),t._v(" "),n("Col",{attrs:{sm:t.inputCol.sm||15,xs:t.inputCol.xs||24}},[e.type&&"input"!==e.type?t._e():n("Input",{attrs:{type:e.secondType||"text"},on:{"on-enter":t.handleSubmit},model:{value:t.obj[e.key],callback:function(n){var i=t.obj,o=e.key;Array.isArray(i)?i.splice(o,1,n):t.obj[e.key]=n},expression:"obj[item.key]"}}),t._v(" "),"radio"===e.type?n("Radio-group",{model:{value:t.obj[e.key],callback:function(n){var i=t.obj,o=e.key;Array.isArray(i)?i.splice(o,1,n):t.obj[e.key]=n},expression:"obj[item.key]"}},t._l(e.collection,function(e){return n("Radio",{key:e.label,attrs:{label:e.label}},[e.icon?n("Icon",{attrs:{type:e.icon}}):t._e(),t._v(" "),e.text?n("span",[t._v(t._s(e.text))]):t._e()],1)})):t._e(),t._v(" "),t.errors[e.key]?n("div",{staticClass:"error"},[t._v("\n        "+t._s(t.errors[e.key])+"\n      ")]):t._e()],1)],1)}),t._v(" "),t.showAction?n("Row",{staticClass:"form-actions",class:{"ivu-modal-footer":t.isModal}},[t.isModal?t._e():n("Col",{attrs:{sm:{span:t.inputCol.sm||15,offset:t.labelCol.sm||4}}},[n("Button",{attrs:{type:"success",loading:t.isLoading,disable:!t.valid},on:{click:t.handleSubmit}},[t._v("\n        "+t._s(this.getSubmitButtonText)+"\n      ")])],1),t._v(" "),t.isModal?[n("Button",{on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"success",loading:t.isLoading,disabled:!t.valid},on:{click:t.handleSubmit}},[t._v("\n        "+t._s(this.getSubmitButtonText)+"\n      ")])]:t._e()],2):t._e()],2)],1)},staticRenderFns:[]}},175:function(t,e,n){"use strict";var i=n(25),o=n.n(i),a=n(163);e.a=function(t){return[{type:"index",width:60,align:"center"},{title:"ID",key:"id",sortable:"custom"},{title:"名称",key:"name",sortable:"custom"},{title:"单位",key:"unit",sortable:"custom"},{title:"TOPIC",key:"topic",sortable:"custom"}].concat(o()(a.a.call(t,["delete"])))}},178:function(t,e,n){"use strict";e.a=function(t){return[{key:"name",label:"名称",rules:{required:!0}},{key:"interval",label:"间隔",rules:{required:!0}},{key:"unit",label:"单位",rules:{required:!0}},{key:"topic",label:"TOPIC"}]}},187:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),o=n.n(i),a=n(7),s=n.n(a),r=n(6),l=n.n(r),u=n(61),c=n(175),d=n(178),f=n(164),m=n.n(f),p=n(170),h=n.n(p);e.default={name:"job",components:{ModalForm:h.a,SimpleForm:m.a},data:function(){return{columns:n.i(c.a)(this),inputs:n.i(d.a)(this),msg:"Welcome to Your Vue.js PWA",isEdit:!1,formModel:!1,initData:{},modelLoading:!1,modelType:null}},beforeMount:function(){this.fetch()},computed:l()({},n.i(u.a)("job",["data","total","filter"])),methods:l()({login:function(){}},n.i(u.b)("job",["fetch","add","delete"]),{sortChange:function(t){this.fetch({sb:t.key,sd:t.order})},handleAdd:function(){this.initData={},this.formModel=!0},pageChange:function(t){this.fetch({curent_page:t})},pageSizeChange:function(t){this.fetch({page_size:t})},onAction:function(t,e){var n=this;return s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"delete"===t&&n.$Notice.error({title:"失败",desc:"测试系统不可删除"});case 1:case"end":return e.stop()}},e,n)}))()},onSubmit:function(t){var e=this;return s()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.initData.uid||e.add({params:t}),e.formModel=!1;case 2:case"end":return n.stop()}},n,e)}))()},onCancel:function(t){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.formModel=!1;case 1:case"end":return t.stop()}},t,e)}))()}})}},216:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"job"},[n("Row",{staticClass:"tools table"},[n("Col",{staticClass:"operators",attrs:{span:"12"}},[n("Button",{attrs:{type:"success"},on:{click:t.handleAdd}},[t._v("添加")])],1),t._v(" "),n("Col",{staticClass:"count",attrs:{span:"12"}},[t._v("\n      共有"+t._s(t.total)+"条数据\n    ")])],1),t._v(" "),n("ModalForm",{attrs:{title:"添加",inputs:t.inputs,"init-data":t.initData},on:{"on-cancel":t.onCancel,"on-submit":t.onSubmit},model:{value:t.formModel,callback:function(e){t.formModel=e},expression:"formModel"}}),t._v(" "),n("Table",{staticClass:"data-table",attrs:{width:"auto",border:"",columns:t.columns,data:t.data},on:{"on-sort-change":t.sortChange}}),t._v(" "),n("Page",{staticClass:"list-page",attrs:{"page-size":t.filter.page_size,"current-page":t.filter.current_page,total:t.total,"show-elevator":"","show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=2.5d4324b8275b4a54b603.js.map